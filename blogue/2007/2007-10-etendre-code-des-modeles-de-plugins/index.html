


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" >
	<head>
		<base href="" />
		<title>Étendre le code des modèles de plugins</title>
<meta name="generator" content="SilverStripe - http://silverstripe.org" />
<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<meta name="keywords" content="ruby on rails, étendre modèle" />
<meta name="description" content="Étendre le modèle d&#39;un plugin en Ruby on Rails" />
Ruby on Rails,Programmation,Ruby

    <meta name="thumbnail" content="http://m2i3.com/M2i3_logo_100x100.png" />
    <link rel="image_src" href="../../../M2i3_logo_100x100.png" />
		<link rel="stylesheet" href="../../../themes/m2i3/css/screen.css" type="text/css" media="screen, projection" />
		<link rel="stylesheet" href="../../../themes/m2i3/css/print.css" type="text/css" media="print" /> 
		<!--[if IE]>
			<link rel="stylesheet" href="themes/m2i3/css/ie.css" type="text/css" media="screen, projection" />
		<![endif]-->
		<link rel="stylesheet" href="../../../themes/m2i3/css/style.css" type="text/css" media="screen, projection" />
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.0/jquery.min.js" type="text/javascript"></script>    
		
		
		
		
                <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-539937-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
	<link rel="stylesheet" type="text/css" href="../../../themes/m2i3/css/layout.css?m=1362517564" />
<link rel="stylesheet" type="text/css" href="../../../themes/m2i3/css/typography.css?m=1360348269" />
<link rel="stylesheet" type="text/css" href="../../../themes/m2i3/css/form.css?m=1297660847" />
<link rel="stylesheet" type="text/css" href="../../../blog/css/blog.css?m=1297660841" />
<link rel="stylesheet" type="text/css" href="../../../themes/m2i3/css/menu.css?m=1297660847" />
<link rel="stylesheet" type="text/css" href="../../../themes/m2i3/css/footer.css?m=1297660847" />
</head>
	<body>
		<div id="banner"></div>
		<div id="header">
			<a id="logo" href="../../../index.html" Title="M2i3 - Connecter vos besoins aux solutions"></a>
			<ul id="menu1">
   
      <li class="mega">
      	<a href="../../../notre-entreprise/index.html" title="Notre entreprise">Notre entreprise</a>
      	
      </li>
   
      <li class="mega">
      	<a href="../../../portfolio/index.html" title="Portfolio">Portfolio</a>
      	
			<div>
			  	
					<a href="../../../portfolio/m2i3/index.html" >M2i3</a>
				
					<a href="../../../portfolio/artyan/index.html" >Artyan</a>
				
					<a href="../../../portfolio/karate-sunfuki/index.html" >Karaté Sunfuki</a>
				
					<a href="../../../portfolio/esprit-du-the/index.html" >L&#39;Esprit du The</a>
				
					<a href="../../../portfolio/retrouvailles-de-la-promotion-de-1994-de-l-esfl/index.html" >Retrouvailles de la promotion de 1994 de l&#39;ESFL</a>
				
					<a href="../../../portfolio/g-force/index.html" >G-Force</a>
				
					<a href="../../../portfolio/omniscient-technology/index.html" >Omniscient Technology</a>
				
					<a href="../../../portfolio/m2i/index.html" >M2i3</a>
				
			</div>
		
      </li>
   
      <li class="mega">
      	<a href="../../../blog.1" title="Blogue">Blogue</a>
      	
			<div>
			  	
					<a href="../../2014/index.html" >2014</a>
				
					<a href="../../2013/index.html" >2013</a>
				
					<a href="../../2012/index.html" >2012</a>
				
					<a href="../../2011/index.html" >2011</a>
				
					<a href="../../2010/index.html" >2010</a>
				
					<a href="../../2009/index.html" >2009</a>
				
					<a href="../../2008/index.html" >2008</a>
				
					<a href="../index.html" >2007</a>
				
					<a href="../../2006/index.html" >2006</a>
				
			</div>
		
      </li>
   
      <li class="mega">
      	<a href="../../../contactez-nous/index.html" title="Contactez-nous">Contactez-nous</a>
      	
      </li>
   
</ul>

		</div>
		<div id="main">
			<div class="shadow_holder">
				<div class="container">
					<!-- div id="Sidebar" class="span-6 pull-6">
	
</div -->

<div id="BlogContent" class="typography push-3 span-18">
	
	<div class="blogEntry">
		<h2>Étendre le code des modèles de plugins</h2>
		<p class="authorDate">Posté par Jean-Marc sur 16 October 2007 | 0 Commentaires</p>
		
			<p class="tags">
				 Tags: 
				
					<a href="../tag/Ruby+on+Rails" title="Voir tous les messages marqués 'Ruby on Rails'" rel="tag">Ruby on Rails</a>,
				
					<a href="../tag/Programmation" title="Voir tous les messages marqués 'Programmation'" rel="tag">Programmation</a>,
				
					<a href="../tag/Ruby" title="Voir tous les messages marqués 'Ruby'" rel="tag">Ruby</a>
				
			</p>
		
      <p>Un courriel que j'ai reçu récemment....  Cher Jean-Marc,  J'ai un plugin que je viens de développer et que j'aimerais réutiliser dans une nouvelle application.  Mon problème est que la nouvelle application doit être en plusieurs langues alors que mon plugin ne fonctionne qu'en une seule langue.    Je sais que je pourrais changer le plugin mais j'devrais aussi</p>
<p>modifier les applications qui l'utilisent déjà.  T'as une recommandation pour résoudre mon problème?  Pris-entre Deuxfeux  -------------------------------------------------------  Cher Pris-entre,  La solution à ton problème est au coeur même du langage Ruby.  Le langage  est dynamique même au niveau des classes et modules.</p>
<div class="inline_ad">// --&gt;</div>
<p>Supposons que tu ai un plugin du nom de "mon_plugin"... et que la classe qui t'intéresse s'appelle "ProfileUtilisateur" (donc dans un fichier nommé "profile_utilisateur.rb" sous le répertoire "models").  Finalement, supposons que tu utilises Globalize pour rendre ton application multilingue et que les colonnes à traduire sont le nom et la description.  Si tu créé un fichier avec le même nom que la classé à étendre dans le répertoire "models" de ton application tu vas cacher le fichier original et en perdre la fonctionnalité.  Pourtant cette approche est très proche de la solution finale.  Donc... tu créé le fichier "profile_utilisateur.rb" dans ton répertoire de modèle et tu place le code suivant dans le fichier:   extend_plugin_class(:mon_plugin, :models, :profile_utilisateur).class_eval do       self.keep_translations_in_model =  true       self.translates :nom, :description, :base_as_default =&gt; true end   La méthode "extend_plugin_class" retourne la classe que l'on cherche à étendre... mais la technique à utiliser est déjà là avec la méthode "class_eval".  Cette dernière permet d'altérer le code déjà en mémoire de la classe.  C'est donc ainsi que l'on peut utiliser les méthodes de Globalize pour indiquer que la classe doit être traduite dans cette application.  Reste donc à comprendre comment la méthode "extend_plugin_class" fonctionne... en voici le code:   def extend_plugin_class(plugin_name, class_type, class_name, &amp;block)   plugin_location = "/../vendor/plugins/%s/app/%s/%s.rb"%[plugin_name, class_type, class_name]   require File.expand_path(File.dirname(RAILS_ROOT) + plugin_location)    class_name.to_s.classify.constantize end</p>
<div class="inline_ad">// --&gt;</div>
<p>On sait que Ruby on Rails favorise la normalisation à la configuration.  Donc, l'emplacement des fichiers de classes d'un plugin seront nécessairement à l'endroit attendu.  Trois étapes très simples, déterminer le nom du fichier à charger, le charger en mémoire et retourner la classe à étendre.  Simple, bref, mais très efficace... enfin j'espère que ça répond à ta question.  Bonne chance!  Jean-Marc</p>
		<br />
	</div>
	
	
	
	
	
</div>

				</div>
			</div>
		</div>
		<div id="bottom_ribbon">
			<div id="footer">
				<div class="container"> 
					<div class="span-10 prefix-1">
  <a href="../../../index.html">M2i3.com</a><br/>
  Notre courriel: <a href="mailto:info@m2i3.com">info@m2i3.com</a><br/>
  Notre téléphone: <strong>+1.888.403.5998</strong>
</div>

					<div id="randomproduct" class="span-12">
  
    <img src="../../../assets/Uploads/RubyonRailslogo.png" alt="RubyonRailslogo" />
    <div class="span-8 prefix-1">
      <p><span style="font-family: 'Lucida Grande', Helvetica, Arial, sans-serif; color: #666666;"><span style="font-size: 12px; line-height: 19px;"><strong>Ruby on Rails</strong> est un cadre applicatif Web écrit en Ruby. Il suit le motif de conception modèle-vue-contrôleur. Le cadre rigide force aux développeurs une démarche de travail rigoureuse. Site principal: <a href="http://rubyonrails.org" target="_blank">Ruby on Rails</a></span></span></p>
    </div>
  
</div>

				</div>
			</div>
		</div>
                <div id="copyright">This website is copyright of M2i3 &copy; 2004-2012<a rel="license" href="http://creativecommons.org/licenses/by/3.0/" style="margin-left:20px"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by/3.0/88x31.png" /></a><br />This <span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" rel="dct:type">work</span> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0 Unported License</a>.</div>
		
	<script type="text/javascript" src="../../../mysite/javascript/jquery.hoverIntent.js?m=1297660842"></script><script type="text/javascript" src="../../../mysite/javascript/menu.js?m=1297660842"></script></body>
</html>
